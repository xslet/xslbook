<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="application/xml" href="xsldoc/xsldoc.xsl"?><!-- xslbook.xsl 0.1 Copyright (C) 2020-2021 xslet@github MIT License --><!--** xslbook.xsl ver0.1 - API Document
**
** Copyright (C) 2020-2021 xslet@github
** MIT License
--><xsl:stylesheet xmlns:book="https://github.com/xslet/2020/xslbook" xmlns:do="https://github.com/xslet/2020/xsldo" xmlns:ut="https://github.com/xslet/2020/xslutil" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"><!--**
  This named template gets an attribute value or a content value of `attr` element which has same name with the attribute.
  The attribute value takes precedence over the `attr` element value.
 --><xsl:template name="book:get_attr"><!--** The attribute name. --><xsl:param name="name"/><!--** An URL of data source file from an ancestor element. --><xsl:param name="data_url"/><!--** A generated ID of a current node in a data source file. --><xsl:param name="data_gid"/><!--** An argument which is passed through xsldo modules. --><xsl:param name="arg0"/><!--** An argument which is passed through xsldo modules. --><xsl:param name="arg1"/><!--** An argument which is passed through xsldo modules. --><xsl:param name="arg2"/><xsl:variable name="_data_url"><xsl:call-template name="book:get_data_url"><xsl:with-param name="data_url" select="$data_url"/></xsl:call-template></xsl:variable><xsl:variable name="_data_gid"><xsl:call-template name="book:get_data_gid"><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:choose><xsl:when test="@*[name()=$name]"><xsl:value-of select="@*[name()=$name]"/></xsl:when><xsl:otherwise><xsl:for-each select="attr[@name=$name]"><xsl:apply-templates><xsl:with-param name="data_url" select="$_data_url"/><xsl:with-param name="data_gid" select="$_data_gid"/><xsl:with-param name="arg0" select="$arg0"/><xsl:with-param name="arg1" select="$arg1"/><xsl:with-param name="arg2" select="$arg2"/></xsl:apply-templates></xsl:for-each></xsl:otherwise></xsl:choose></xsl:template><!--**
  This named template gets a generated ID by `generate-id` function for a current node in a data source file.
  If `data-src` attribute is presented, this template returns an empty string for reset the generated ID.
 --><xsl:template name="book:get_data_gid"><!--** A generated ID for a current node in a data source file. --><xsl:param name="data_gid"/><xsl:if test="not(boolean(@data-src) or boolean(attr[@name='data-src']))"><xsl:value-of select="$data_gid"/></xsl:if></xsl:template><!--**
  This named template gets an URL of data source file by `data-src` attribute or a parameter `data_url` from an ancestor element.
  The value by `data-src` attribute takes precedence over the value by the parameter.
 --><xsl:template name="book:get_data_url"><!--** An URL of data source file from an ancestor element. --><xsl:param name="data_url"/><!--** A generated ID of a current node in a data source file. --><xsl:param name="data_gid"/><xsl:choose><xsl:when test="boolean(@data-src)"><xsl:value-of select="@data-src"/></xsl:when><xsl:when test="boolean(attr[@name='data-src'])"><xsl:apply-templates select="attr[@name='data-src']"><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/></xsl:apply-templates></xsl:when><xsl:otherwise><xsl:value-of select="$data_url"/></xsl:otherwise></xsl:choose></xsl:template><!--**
  This template gets a value of an element at the specified path. The path is specified with `of` attribute. The prefix and suffix for a value can be specified with `prefix` and `suffix` attributes.
 --><xsl:template match="value"><!--** An URL of data source file from an ancestor element. --><xsl:param name="data_url"/><!--** A generated ID of a current node in a data source file. --><xsl:param name="data_gid"/><xsl:variable name="_data_url"><xsl:call-template name="book:get_data_url"><xsl:with-param name="data_url" select="$data_url"/></xsl:call-template></xsl:variable><xsl:variable name="_data_gid"><xsl:call-template name="book:get_data_gid"><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:variable name="_path"><xsl:call-template name="book:get_attr"><xsl:with-param name="name">of</xsl:with-param><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:variable name="_prefix"><xsl:call-template name="book:get_attr"><xsl:with-param name="name">prefix</xsl:with-param><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:variable name="_suffix"><xsl:call-template name="book:get_attr"><xsl:with-param name="name">suffix</xsl:with-param><xsl:with-param name="data_url" select="$data_url"/><xsl:with-param name="data_gid" select="$data_gid"/></xsl:call-template></xsl:variable><xsl:call-template name="do:first_object_by_path"><xsl:with-param name="path" select="$_path"/><xsl:with-param name="what">text</xsl:with-param><xsl:with-param name="data_url" select="$_data_url"/><xsl:with-param name="data_gid" select="$_data_gid"/><xsl:with-param name="prefix" select="$_prefix"/><xsl:with-param name="suffix" select="$_suffix"/></xsl:call-template></xsl:template></xsl:stylesheet>